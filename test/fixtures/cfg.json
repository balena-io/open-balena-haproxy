{
    "defaults": [
        "timeout connect 5000",
        "timeout client 60000",
        "timeout server 60000",
        "default-server init-addr none"
    ],
    "resolvers": [
        {
            "id": "test-bridge-resolver",
            "nameservers": {
                "test-dns-resolver": "127.0.0.11:53",
                "second-dns-resolver": "17.18.0.1:1234"
            },
            "hold": {
                "valid": "0ms",
                "obsolete": "1000ms",
                "refused": "30s"
            },
            "resolveRetries": "3",
            "timeout": {
                "resolve": "1s"
            }
        }
    ],
    "admin-http": {
        "backend": [
            {
                "url": "http://admin:80",
                "server": {
                    "resolvers": "test-bridge-resolver",
                    "resolve-prefer": "ipv4",
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "http",
                "domain": "open-balena-haproxy.local",
                "subdomain": "admin",
                "port": "80"
            }
        ]
    },
    "admin": {
        "backend": [
            {
                "url": "http://admin:80",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "admin",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "api": {
        "backend": [
            {
                "url": "http://api:80",
                "server": {
                    "resolvers": "test-bridge-resolver",
                    "resolve-prefer": "ipv4",
                    "check": null,
                    "port": "<port>"
                }
            },
            {
                "url": "http://api2:80",
                "server": {
                    "resolvers": "test-bridge-resolver",
                    "resolve-prefer": "ipv4",
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "api",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            },
            {
                "protocol": "https",
                "domain": "balenadev.io",
                "subdomain": "api",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "builder": {
        "backend": [
            {
                "url": "http://builder:80",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "builder",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "delta": {
        "backend": [
            {
                "url": "http://delta:80",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "delta",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "devices": {
        "backend": [
            {
                "url": "http://devices:80",
                "server": {
                    "send-proxy": null,
                    "check-send-proxy": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "devices",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "img": {
        "backend": [
            {
                "url": "http://img:80",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "img",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "registry": {
        "backend": [
            {
                "url": "http://registry:80",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "registry",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "registry2": {
        "backend": [
            {
                "url": "http://registry2:80",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "registry2",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "s3": {
        "backend": [
            {
                "url": "http://s3:80",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "s3",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "ui": {
        "backend": [
            {
                "url": "http://ui:80",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "dashboard",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "sentry": {
        "backend": [
            {
                "url": "http://sentry:80",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "sentry",
                "port": "443",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "registry2-81": {
        "backend": [
            {
                "url": "http://registry2:81",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "https",
                "domain": "open-balena-haproxy.local",
                "subdomain": "registry2",
                "port": "445",
                "crt": "-----BEGIN CERTIFICATE-----\n-----END CERTIFICATE-----\n"
            }
        ]
    },
    "vpn": {
        "backend": [
            {
                "url": "tcp://vpn:443",
                "server": {
                    "send-proxy-v2": null,
                    "check-send-proxy": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "tcp",
                "domain": "open-balena-haproxy.local",
                "subdomain": "vpn",
                "port": "443"
            }
        ]
    },
    "devices-ssh": {
        "backend": [
            {
                "url": "tcp://devices:2222",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "tcp",
                "domain": "*",
                "port": "222"
            }
        ]
    },
    "git": {
        "backend": [
            {
                "url": "tcp://git:22",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "tcp",
                "domain": "*",
                "port": "2222"
            }
        ]
    },
    "db": {
        "backend": [
            {
                "url": "tcp://db:5432",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "tcp",
                "domain": "*",
                "port": "5432"
            }
        ]
    },
    "redis": {
        "backend": [
            {
                "url": "tcp://redis:6379",
                "server": {
                    "check": null,
                    "port": "<port>"
                }
            }
        ],
        "frontend": [
            {
                "protocol": "tcp",
                "domain": "*",
                "port": "6379",
                "clientTimeout": "1h"
            }
        ]
    },
    "stats": {
        "frontend": [
            {
                "protocol": "https",
                "domain": "*",
                "port": "1936",
                "stats": [
                    "enable",
                    "uri /https_route",
                    "auth test:test"
                ]
            },
            {
                "protocol": "http",
                "domain": "*",
                "port": "1937",
                "stats": [
                    "enable",
                    "uri /http_route"
                ]
            }
        ]
    }
}
